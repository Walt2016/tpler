<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>sprite</title>
    <link rel="shortcut icon" type="image/x-icon" href="data:image/gif;base64,YQ==">
    <script src="js/tpler.js"></script>
</head>
<style>
#sprite {
    width: 100px;
    height: 100px;
}

.hide {
    display: none
}
</style>

<body>
    <div id="sprite"></div>
    <script>
    var src = "image/rabbit.png"

    // _.draw("")
    // _.loadImg(src,function(img){

    // 	console.log(img)
    // 	_.$("body").append(img)

    // })



    // _.cutImg(src, 10, 10, function(imgArr) {

    //     // console.log(imgArr)
    //     imgArr.forEach(function(t, i) {

    //         console.log(t)

    //         if (i > 0) {
    //             t.className = "hide"
    //         }

    //         _.$("#sprite").appendChild(t)
    //     })

    // })


    var draw = _.draw({
        ratio: "1:1",
        background: "#dedede",
        callback: function(result) {}
    })
    _.$("body").appendChild(draw.canvas)


    _.loadImg(src, function(img) {

        console.log(img)

        var imgWidth=img.width;
        var imgHeight=img.height;
        // _.$("body").append(img)
        var width = 102;
        var height = 180

        var offsetX = 0,
            offsetY = 0

        function _movie() {
        	if(offsetY>imgHeight){
        		return
        	}
        	if(offsetX>imgWidth){
        		offsetX=0
        		offsetY+=height;
        	}
        	draw.clear();
            draw.context.drawImage(img, offsetX, offsetY, width, height, 0, 0, width, height)
            offsetX+=width;

            
            setTimeout(_movie, 200);

        }

        // _movie();


    })


    var src="image/scorpion-sprite.png"


       _.loadImg(src, function(img) {

        console.log(img)

        var imgWidth=img.width;
        var imgHeight=img.height;
        //328 207
        // _.$("body").append(img)
        var width = 45;
        var height = 98

        var offsetX = 0,
            offsetY = 0

        function _movie() {
        	if(offsetY>imgHeight){
        		return
        	}
        	if(offsetX>imgWidth){
        		offsetX=0
        		offsetY+=height;
        	}
        	draw.clear();
            draw.context.drawImage(img, offsetX, offsetY, width, height, 0, 0, width, height)
            offsetX+=width;

            
            setTimeout(_movie, 200);

        }

        _movie();


    })
    </script>
</body>

</html>