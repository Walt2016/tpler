<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>ball</title>
    <script src="js/tpler.js"></script>
    <link rel="shortcut icon" type="image/x-icon" href="data:image/gif;base64,YQ==">
    <style>
    body {
        margin: 0;
        padding: 0
    }
    </style>
</head>

<body>
    <div class="screen"></div>
    <script>
    // //运动小球
    // ball: function(opt) {
    //     var self = this;
    //     var canvas = this.canvas;
    //     var ctx = this.context;
    //     var opt = this.default(opt);
    //     var x = opt.x,
    //         y = opt.y,
    //         r = opt.r,
    //         color = opt.color;
    //     ctx.fillStyle = opt.color;
    //     var link = opt.link;
    //     var spped = opt.speed || 3;
    //     var identifier = opt.identifier;

    //     var num = opt.num || 1;
    //     var Ball = function(id) {
    //         this.id = id;
    //         this.x = x;
    //         this.y = y;
    //         this.r = r;
    //         this.color = _.color(); // _.rgba();
    //         // speed: 15,
    //         this.vx = (Math.random() * 2 - 1) * spped;
    //         this.vy = (Math.random() * 2 - 1) * spped;

    //         //     //         var speed = 5; //速度
    //         //     // var xunits = Math.cos(radians) * speed; //x坐标增量
    //         //     // var yunits = Math.sin(radians) * speed;  //y坐标增量

    //         //     //         速度公式： V=V0+at
    //         //     // 位移公式: x=V0t+1/2at^2
    //     }

    //     Ball.prototype = {
    //         fill: function(text) {
    //             ctx.fillStyle = this.color;
    //             ctx.beginPath();
    //             ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
    //             ctx.closePath();
    //             ctx.fill();

    //             // var text = opt.text;
    //             if (identifier) {
    //                 text = text || this.id;
    //                 if (!_.isUndefined(text)) { //measureText
    //                     ctx.fillStyle = "#000";
    //                     ctx.font = "12px Verdana";
    //                     ctx.fillText(text, this.x - 4, this.y + 5);
    //                 }
    //             }
    //             return this;
    //         },
    //         strok: function(text) {
    //             ctx.strokeStyle = this.color;
    //             ctx.beginPath();
    //             ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
    //             ctx.closePath();
    //             ctx.stroke();
    //             text = text || this.id;
    //             if (!_.isUndefined(text)) {
    //                 ctx.fillStyle = "#000";
    //                 ctx.font = "12px Verdana";
    //                 ctx.fillText(text, this.x - 4, this.y + 5);
    //             }
    //             return this;
    //         },
    //         move: function() {
    //             this.x += this.vx;
    //             this.y += this.vy;
    //             if (this.x < this.r) { //碰到左边的边界
    //                 this.x = this.r;
    //                 this.vx = -this.vx;
    //             } else if (this.y < this.r) {
    //                 this.y = this.r;
    //                 this.vy = -this.vy;
    //             } else if (this.x > canvas.width - this.r) {
    //                 this.x = canvas.width - this.r;
    //                 this.vx = -this.vx;
    //             } else if (this.y > canvas.height - this.r) {
    //                 this.y = canvas.height - this.r;
    //                 this.vy = -this.vy;
    //             }
    //             return this;
    //         },
    //         movie: function() {
    //             self.clear();
    //             this.move().fill();
    //             requestAnimationFrame(this.movie.bind(this));
    //         },
    //         //遇见 撞到collide
    //         meet: function(b) {
    //             //距离
    //             var d = self.distance.call(self, this, b);
    //             if (d <= this.r + b.r) {
    //                 console.log("撞到了")
    //                 return true;
    //             }
    //         }
    //     }

    //     var BallsManger = function() {
    //         return new BallsManger.prototype.init();
    //     }

    //     BallsManger.prototype = {
    //         constructor: BallsManger,
    //         init: function() {
    //             this.balls = [];
    //             for (var i = 0; i < num; i++) {
    //                 this.balls.push(new Ball(i));
    //             }
    //             this.movie();
    //         },
    //         movie: function() {
    //             self.clear();
    //             var vsList = [];
    //             var balls = this.balls;
    //             var len = balls.length;


    //             balls.forEach(function(t, i) {
    //                 t.move().fill();
    //                 if (link) {
    //                     for (var j = i; j < len - 1; j++) {
    //                         var vs = [t, balls[j + 1]];
    //                         vsList.push(vs);

    //                         if (t.meet(balls[j + 1])) {
    //                             console.log("反弹")
    //                         }

    //                         //距离
    //                         // var d = self.distance.apply(self, vs);
    //                         // if (d < vs[0].r + vs[1].r) {
    //                         //     console.log("撞到了" + [i, j + 1]);
    //                         //     //反弹 能量相互
    //                         //     // var tmp = vs.slice(0);
    //                         //     // t.vx = tmp[1].vx * -1;
    //                         //     // t.vy = tmp[1].vy * -1;
    //                         //     // balls[j + 1].vx = tmp[0].vx * -1;
    //                         //     // balls[j + 1].vy = tmp[0].vy * -1;
    //                         // }
    //                     }
    //                 }
    //             })

    //             if (link) {
    //                 self.drawVerticesGroup(vsList);
    //             }
    //             this.id = requestAnimationFrame(this.movie.bind(this));
    //         },
    //         stop: function() {
    //             this.id && cancelAnimationFrame(this.id);
    //         }
    //     }
    //     BallsManger.prototype.init.prototype = BallsManger.prototype;
    //     return BallsManger();
    // },
    var draw = _.draw({
        ratio: "1:1",
        background: "#dedede"
    })
    _.$(".screen").appendChild(draw.canvas)
    var ball = draw.ball({ num: 5 }) //
    // ball.movie()

    setTimeout(function() {
        ball.stop();
    }, 60000)
    </script>
</body>

</html>